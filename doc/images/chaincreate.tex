\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node
    distance=2.8cm,
                    semithick,scale=0.8, every node/.style={scale=0.8}]
    \tikzstyle{every state}=[]

    \node[state] (A) {$ o_1 $}; \node[state] (B) [right of=A] {$ o_2 $};
    \node[state] (C) [right of=B] {$ o_3 $};

    \node[state] (X) [below right =1cm of A] {$ s_3 $}; \node[state] (Y)
    [right of=X] {$ s_2 $}; \node[state] (Z) [right of=Y] {$ s_1 $};

    \path (B) edge node {source} (A) (C) edge node {source} (B) (A) edge
    [bend left] node {map(\_ * 2)} (B) (B) edge [bend left] node {filter
    (\_ < 3)} (C) (X) edge node[below] {destination} (Y) (Y) edge node[below]
    {destination} (Z) (Z) edge node {subscribe} (C) (Y) edge node {subscribe}
    (B) (X) edge node {subscribe} (A);

    \draw[<-] (A) -- node[above] {of(1,2,3)} ++(-2cm,0);
    %\draw[<-] (Z) -- node[below] {subscribe} ++(2cm,0);

\end{tikzpicture}
